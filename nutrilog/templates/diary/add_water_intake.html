{% extends 'base.html' %}

{% block title %}Add Water Intake{% endblock %}

{% block header %}
<h1>Enter your water intake:</h1>
<script>
    function to_local_time_string(utc_time_string) {
        utc_time_string += ' UTC'
        let date = new Date(utc_time_string)
        return date.toLocaleString()
    }
</script>
{% endblock %}

{% block content %}
<form method="post" class="display-flex flex-column align-center">
    <table>
        <tr>
            <td><label for="volume">Volume:</label></td>
            <td><input name="volume" value="0.25" required autofocus type="number" min="0" step="0.01"></td>
            <td><label for="volume">L</label></td>
        </tr>
    </table>
    <button class="btn" type="submit">Add Intake</button>
    <div class="display-flex align-center flex-column">
        <h2>History:</h2>
        <table class="tbl">
            <th>Volume (L)</th>
            <th>Time</th>
            {% for record in water_records %}
            <tr>
                <td>{{ record.volume }}</td>
                <td>
                    <script>
                        document.write(to_local_time_string("{{ record.time }}"))
                    </script>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
</form>
{% endblock %}